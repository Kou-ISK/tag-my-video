# このアプリについて

### 概要

- スポーツのビデオ分析での利用を想定
- ボタン操作を通じて映像にイベントをタグ付けするアプリ
- 2つの映像ファイルを同時に再生することが可能
  - ボタン1回目押下時、2回目押下時の映像の秒数を取得し、タイムライン配列に格納する。
  - 保存ボタンを押すことでタイムラインはJSONファイルに保存される

### ホットキー

- 上キー: 再生/停止
- 右キー: 0.5倍速再生
- ⇧ + 右キー: 2倍速再生
- ⌘ + 右キー: 4倍速再生
- ⌥ + 右キー: 6倍速再生
- 左キー: 5秒戻し
- ⇧ + 左キー: 10秒戻し
- ⌘ + ⇧ + A: グラフを表示

## ターミナ操作手順

### ターミナルから起動する方法

以下コマンドをターミナルで実行

```zsh
yarn init
yarn electron:start
```

### アプリを配布可能な形式にビルドする手順

以下コマンドを実行することでdist配下にdmgファイルが配置される。

```zsh
yarn electron:build
```

## 新機能：音声同期機能（改善版）

### 概要

複数の映像ファイルがある場合、音の波形を分析して自動的に同期を取る機能が追加されました。

### 使用方法（改善版）

1. **新規パッケージ作成時**

   - パッケージ名とチーム名を入力
   - 寄り（タイト）映像を選択
   - ワイド映像を選択（音声同期分析が自動実行されます）

2. **同期分析**

   - 分析中は「音声同期を分析中...」のメッセージが表示されます
   - 分析完了後、同期オフセットと信頼度が表示されます
   - **映像プレイヤーは自動的に新しい同期設定を適用します**

3. **同期再実行・調整**

   - **メニューバー**: 映像 → 音声同期を再実行（Cmd+Shift+S）
   - **メニューバー**: 映像 → 同期をリセット（Cmd+Shift+R）
   - **メニューバー**: 映像 → 同期オフセット調整（Cmd+Shift+O）
   - **UIボタン**: コントローラーの「同期再実行」「同期リセット」「オフセット調整」ボタン
   - **即座に反映**: すべての同期操作は映像に即座に反映されます

4. **リアルタイム同期再生**
   - 共通シークバーで2つの映像を同時制御できます
   - 同期情報（オフセット・信頼度）がシークバー下に表示されます
   - プレイヤーは同期オフセットをリアルタイムで維持します

### 表示される情報

- **同期オフセット**: 2つの映像の時間差（秒）
- **信頼度**: 同期の正確性（0-100%）
- **分析状態**: 同期分析が完了しているかどうか
- **同期品質**: 高精度（信頼度80%以上）または要確認（80%未満）
